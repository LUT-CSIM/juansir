# EdgeAI 道路巡检项目

本仓库示例了一个基于 Django 的道路巡检平台，提供方便的 Web 界面以显示日常无人机道路检查结果。

## 功能简介

- 播放 1080p 示例检测视频，模拟行驶中的道路场景
- 演示视频中包含动态裂缝和坑槽等病害示例，每种病害随机出现 2~10 次，且可在时间上重叠
- 病害沿道路方向自底向上运动，更贴近真实巡检
- 视频与病害标注一一对应，轨迹与画面保持同步
- 通过面板显示巡检统计数据，可选查看单个检测批次的统计
- 使用 Chart.js 绘制统计图表，左侧饼图展示数据库中的病害类型分布
- 左侧列表展示检测批次，点击可加载对应视频及病害轨迹
- 在视频上按病害类型以不同颜色叠加框和标签，优先使用 `requestVideoFrameCallback` 精确同步每一帧，旧浏览器回退到 `requestAnimationFrame`
- 提供 `/api/tracks/` 接口返回病害轨迹及截图，可点击列表跳转到视频对应时间
- 视频可手动暂停/播放，播放结束后浮现“重新播放”按钮
- 点击下方病害轨迹后会自动隐藏“重新播放”按钮并从对应时间继续播放
- Django admin 中可维护病害类型、天气、严重程度等基础字典
- 模板中可直接使用 `{{ MEDIA_URL }}` 引用媒体文件，默认路径为 `/media/`
- 右上角展示可配置的道路总里程和道路数量
- 右侧面板顶部以动态图标显示当天天气和温度
- 演示数据覆盖最近五天，每天的天气、温度和病害数量均不同
- 底部缺陷轨迹区域默认展示 5 个病害条目，如有更多可通过科幻风格的横向拖动滑动查看更多，每个病害名称后附带严重程度文字

## 快速开始

1. 可选创建并活化 Python 虚拟环境
2. 安装依赖：

   ```bash
   pip install django==4.2.1 Pillow django-simpleui django-ckeditor \
       imageio imageio-ffmpeg
   ```

3. 运行测试：

   ```bash
   python manage.py test
   ```

4. 生成演示数据（会清除 web 应用中已有数据）：

   ```bash
   python manage.py generate_demo_data
   ```

   可通过 `DEMO_DAYS` 设置控制生成天数，默认 5 天。

5. 启动开发服务器：

   ```bash
   python manage.py runserver
   ```

在测试环境中访问 `http://127.0.0.1:8000/` 即可查看界面效果。

## 项目需求

本项目目标是提供一个用于无人机道路巡检结果展示的基础平台，主要需求包括：

- 能够测试性播放问题工作图像或视频
- 提供简单登录和统计视图的功能
- 与后端实际的道路检测系统简单联动，方便以后的扩展
